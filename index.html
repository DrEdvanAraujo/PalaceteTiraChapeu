<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Tour Palacete Tira-Chap√©u</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; overflow: hidden; font-family: 'Segoe UI', sans-serif; background-color: #f0f0f0; }
    canvas { position: fixed; top: 0; left: 0; z-index: 0; }
    .card-container { position: relative; z-index: 1; display: flex; justify-content: center; align-items: center; height: 100vh; perspective: 1200px; }
    .card { width: 450px; background: rgba(255, 255, 255, 0.97); border-radius: 20px; padding: 30px; box-shadow: 0 15px 35px rgba(0,0,0,0.25); transform-style: preserve-3d; transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1); }
    .card:hover { transform: rotateY(5deg) rotateX(5deg) scale(1.02); }
    h2 { text-align: center; color: #00695c; margin-bottom: 20px; font-size: 1.8em; }
    .topic { background: #e0f2f1; padding: 12px 18px; margin: 12px 0; border-radius: 10px; cursor: pointer; transition: background 0.3s, transform 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .topic:hover { background: #b2dfdb; transform: translateX(5px); }
    .modal { position: fixed; top: 0; left: 0; height: 100vh; width: 100vw; background: rgba(0,0,0,0.7); display: none; justify-content: center; align-items: center; z-index: 10; padding: 20px; }
    .modal-content { background: white; max-width: 750px; width: 90%; padding: 30px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.3); position: relative; animation: fadeIn 0.4s ease-out; max-height: 90vh; overflow-y: auto;}
    @keyframes fadeIn { from { opacity: 0; transform: scale(0.9) translateY(20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
    .close-btn { position: absolute; top: 15px; right: 20px; font-size: 28px; cursor: pointer; color: #555; transition: color 0.2s; }
    .close-btn:hover { color: #000; }
    .modal h3 { margin-top: 0; color: #004d40; font-size: 1.6em; margin-bottom: 15px; }
    .modal h4 { color: #00574B; font-size: 1.3em; margin-top: 25px; margin-bottom: 10px; border-bottom: 1px solid #b2dfdb; padding-bottom: 5px;}
    .modal p, .modal li { color: #333; line-height: 1.7; font-size: 1.05em; margin-bottom: 10px; /* Adicionado margin-bottom para par√°grafos */ }
    .modal ul, .modal ol { padding-left: 20px; margin-bottom: 15px; }
    .modal a { color: #00796b; text-decoration: none; }
    .modal a:hover { text-decoration: underline; }

    .restaurant-btn {
      background-color: #00796b; color: white; padding: 12px 18px; margin: 8px 0; border-radius: 8px;
      cursor: pointer; transition: background-color 0.3s, transform 0.2s; text-align: left;
      font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .restaurant-btn:hover { background-color: #004d40; transform: translateY(-2px); }
    .restaurant-details {
      display: none; padding: 15px; margin-top: -5px; margin-bottom: 10px;
      background-color: #e8f5e9; border: 1px solid #c8e6c9; border-radius: 0 0 8px 8px;
      font-size: 0.95em; color: #2e7d32;
    }
    .restaurant-details p { margin: 8px 0; font-size: 0.98em; line-height: 1.6;}
    .restaurant-details strong { color: #00695c; }
    .restaurant-details a { font-weight: bold; }

    .speakable-trigger {
        cursor: pointer;
        transition: color 0.2s;
    }
    .speakable-trigger:hover {
        color: #007bff;
    }
    .speaking-active {
        color: #28a745 !important;
        font-weight: bold;
    }
    .curiosity-section p { /* Par√°grafos dentro da nova se√ß√£o de curiosidades */
        margin-bottom: 12px; /* Espa√ßamento entre par√°grafos de curiosidades */
        line-height: 1.75;
    }
    .curiosity-section strong.speakable-trigger { /* Destaque para os gatilhos de fala */
        color: #00695c; /* Uma cor que combine com o tema */
    }
    .instagram-link-roteiro {
        font-size: 0.9em;
    }
  </style>
</head>
<body>
  <canvas id="bgCanvas"></canvas>

  <div class="card-container">
    <div class="card">
      <h2>üèõÔ∏è Palacete Tira-Chap√©u</h2>
      <div class="topic" onclick="openModal(0)">üìç Localiza√ß√£o e Acesso</div>
      <div class="topic" onclick="openModal(1)">üèóÔ∏è Hist√≥ria e Arquitetura</div>
      <div class="topic" onclick="openModal(2)">üõ†Ô∏è Restauro e Revitaliza√ß√£o</div>
      <div class="topic" onclick="openModal(3)">üçΩÔ∏è Complexo Gastron√¥mico e Cultural</div>
      <div class="topic" onclick="openModal(4)">üñºÔ∏è Exposi√ß√µes e Eventos Atuais</div>
      <div class="topic" onclick="openModal(5)">üó∫Ô∏è Sugest√£o de Roteiro e Curiosidades</div>
    </div>
  </div>

  <div id="modals"></div>

  <script>
    let utterance = null;
    let currentlySpeakingElement = null;

    const modalContent = [
      { // 0
        title: 'üìç Localiza√ß√£o e Acesso',
        text: `
          <p>O Palacete Tira-Chap√©u est√° estrategicamente situado no cora√ß√£o do Centro Hist√≥rico de Salvador, na esquina da Rua Chile com a Rua do Tira-Chap√©u.</p>
          <ul>
            <li><strong>Endere√ßo:</strong> Pra√ßa Castro Alves, N¬∫ 12, Rua Chile - Centro, Salvador - BA, 40020-160.</li>
            <li><strong>Ponto de Refer√™ncia:</strong> Pr√≥ximo ao Elevador Lacerda e ao Mercado Modelo, facilitando a visita combinada a outros pontos tur√≠sticos.</li>
            <li><strong>Como Chegar:</strong>
              <ul>
                <li><strong>Transporte P√∫blico:</strong> Diversas linhas de √¥nibus servem a regi√£o do Centro Hist√≥rico.</li>
                <li><strong>Transporte por Aplicativo/T√°xi:</strong> Acesso direto e conveniente.</li>
                <li><strong>A P√©:</strong> Ideal para quem j√° est√° explorando o Centro Hist√≥rico.</li>
              </ul>
            </li>
          </ul>
          <p>Sua localiza√ß√£o privilegiada oferece vistas deslumbrantes da Ba√≠a de Todos os Santos.</p>
        `
      },
      { // 1
        title: 'üèóÔ∏è Hist√≥ria e Arquitetura',
        text: `
          <p>O Palacete Tira-Chap√©u √© uma joia arquitet√¥nica que remonta ao in√≠cio do s√©culo XX.</p>
          <ul>
            <li><strong>Ano de Constru√ß√£o:</strong> Projetado em 1914 e inaugurado em 1917.</li>
            <li><strong>Arquiteto:</strong> Rossi Baptista, renomado arquiteto da √©poca.</li>
            <li><strong>Estilo Arquitet√¥nico:</strong> Ecl√©tico, com uma rica ornamenta√ß√£o que mescla elementos do barroco tardio, neocl√°ssico e art nouveau. Destacam-se as fachadas imponentes, varandas com gradis de ferro trabalhado e detalhes escult√≥ricos.</li>
            <li><strong>Import√¢ncia Hist√≥rica:</strong> Originalmente concebido para ser um centro comercial de luxo, o edif√≠cio foi um marco da moderniza√ß√£o urbana de Salvador e um s√≠mbolo de prest√≠gio da Rua Chile, a primeira rua planejada do Brasil.</li>
          </ul>
          <p>Ao longo dos anos, abrigou diversas atividades comerciais e escrit√≥rios, sendo uma testemunha viva das transforma√ß√µes da cidade.</p>
        `
      },
      { // 2
        title: 'üõ†Ô∏è Restauro e Revitaliza√ß√£o',
        text: `
          <p>O processo de restauro do Palacete Tira-Chap√©u foi um trabalho minucioso para devolver o esplendor original ao edif√≠cio, adaptando-o para novos usos contempor√¢neos.</p>
          <ul>
            <li><strong>Respons√°vel pelo Restauro:</strong> Elysium Sociedade Cultural, com apoio de investidores e sob supervis√£o de √≥rg√£os de patrim√¥nio.</li>
            <li><strong>Per√≠odo:</strong> Conclu√≠do entre 2021 e 2024.</li>
            <li><strong>Foco do Restauro:</strong>
              <ul>
                <li>Preserva√ß√£o da fachada e elementos ornamentais originais.</li>
                <li>Recupera√ß√£o de estruturas internas, pisos, esquadrias e pinturas decorativas.</li>
                <li>Moderniza√ß√£o das instala√ß√µes (el√©trica, hidr√°ulica, climatiza√ß√£o) para garantir conforto e seguran√ßa.</li>
                <li>Adapta√ß√£o dos espa√ßos para abrigar o novo complexo gastron√¥mico e cultural.</li>
              </ul>
            </li>
          </ul>
          <p>O objetivo foi n√£o apenas restaurar um patrim√¥nio, mas reintegr√°-lo ativamente √† vida cultural e social de Salvador.</p>
        `
      },
      { // 3
        title: 'üçΩÔ∏è Complexo Gastron√¥mico e Cultural',
        text: `
          <p>O Palacete Tira-Chap√©u abriga uma sele√ß√£o de restaurantes que oferecem diversas experi√™ncias culin√°rias em um ambiente hist√≥rico e charmoso.</p>
          <div class="restaurant-btn" onclick="toggleDetails(0)">PUB 1549 ‚ûï</div>
          <div class="restaurant-details" id="rest0">
            <p><strong>Conceito:</strong> Um espa√ßo para desfrutar de drinks especiais e cl√°ssicos, acompanhados de petiscos e boa m√∫sica.</p>
            <p><strong>Ambiente:</strong> Intimista e acolhedor, perfeito para um happy hour ou uma noite descontra√≠da com amigos.</p>
            <p><strong>Destaques:</strong> Carta de drinks variada e sele√ß√£o de petiscos.</p>
            <p><a href="https://palacetetirachapeu.com.br/gastronomia/pub-1549/" target="_blank">Mais Informa√ß√µes</a> | <a href="https://www.instagram.com/pub.1549/" target="_blank">Instagram</a></p>
          </div>
          <div class="restaurant-btn" onclick="toggleDetails(1)">PAL√Ä ‚ûï</div>
          <div class="restaurant-details" id="rest1">
            <p><strong>Conceito:</strong> Charme e eleg√¢ncia definem o PAL√Ä, que oferece um menu contempor√¢neo celebrando ingredientes locais com sofistica√ß√£o.</p>
            <p><strong>Ambiente:</strong> Possui um deslumbrante terra√ßo com vista panor√¢mica para a Ba√≠a de Todos os Santos, ideal para momentos especiais.</p>
            <p><strong>Destaques:</strong> Culin√°ria sofisticada e vista privilegiada.</p>
            <p><a href="https://palacetetirachapeu.com.br/gastronomia/pala-7/" target="_blank">Mais Informa√ß√µes</a> | <a href="https://www.instagram.com/pala7rooftop/" target="_blank">Instagram</a></p>
          </div>
          <div class="restaurant-btn" onclick="toggleDetails(2)">CASAR√åA ‚ûï</div>
          <div class="restaurant-details" id="rest2">
            <p><strong>Conceito:</strong> Um convite ao aconchego e ao sabor de casa, com receitas tradicionais preparadas com um toque de carinho.</p>
            <p><strong>Ambiente:</strong> Perfeito para um caf√© da manh√£ refor√ßado, um almo√ßo saboroso ou lanches ao longo do dia.</p>
            <p><strong>Destaques:</strong> Comida caseira, ambiente acolhedor para refei√ß√µes di√°rias.</p>
            <p><a href="https://palacetetirachapeu.com.br/gastronomia/casaria/" target="_blank">Mais Informa√ß√µes</a> | <a href="https://www.instagram.com/casaria.ssa/" target="_blank">Instagram</a></p>
          </div>
          <div class="restaurant-btn" onclick="toggleDetails(3)">PRETA - Cozinha de Raiz ‚ûï</div>
          <div class="restaurant-details" id="rest3">
            <p><strong>Conceito:</strong> Uma imers√£o na gastronomia ancestral, trazendo os sabores aut√™nticos da Ilha de Mar√© e do Rec√¥ncavo Baiano.</p>
            <p><strong>Ambiente:</strong> Proporciona uma experi√™ncia cultural rica, conectando o visitante com as ra√≠zes da culin√°ria local.</p>
            <p><strong>Chef:</strong> Associado √† renomada Chef Angeluci Figueiredo (verificar informa√ß√µes no local para detalhes mais atuais sobre a opera√ß√£o).</p>
            <p><strong>Destaques:</strong> Culin√°ria baiana de raiz, valoriza√ß√£o de ingredientes e tradi√ß√µes locais.</p>
            <p><a href="https://palacetetirachapeu.com.br/gastronomia/preta-restaurante/" target="_blank">Mais Informa√ß√µes</a> | <a href="https://www.instagram.com/pretatirachapeu/" target="_blank">Instagram</a></p>
          </div>
        `
      },
      { // 4
        title: 'üñºÔ∏è Exposi√ß√µes e Eventos Atuais',
        text: `
          <p>Al√©m da excel√™ncia gastron√¥mica, o Palacete Tira-Chap√©u se destaca como um espa√ßo cultural din√¢mico.</p>
          <ul>
            <li><strong>Exposi√ß√£o Permanente:</strong> Frequentemente, h√° espa√ßos dedicados a contar a hist√≥ria do pr√≥prio Palacete e da Rua Chile, com fotografias antigas, documentos e artefatos.</li>
            <li><strong>Eventos Culturais:</strong> O local sedia eventos como:
              <ul>
                <li>Lan√ßamentos de livros</li>
                <li>Pequenos shows musicais (jazz, bossa nova, MPB)</li>
                <li>Palestras e workshops</li>
                <li>Exposi√ß√µes de arte tempor√°rias de artistas locais e nacionais</li>
              </ul>
            </li>
            <li><strong>Como se Informar:</strong> Recomenda-se consultar o site oficial do Palacete Tira-Chap√©u ou suas redes sociais para a programa√ß√£o mais recente. Muitas vezes, os pr√≥prios restaurantes do complexo divulgam os eventos.</li>
          </ul>
          <p>Visitar o Palacete √© uma oportunidade de mergulhar na cultura baiana, seja atrav√©s da gastronomia, da hist√≥ria ou das artes.</p>
        `
      },
      { // 5
        title: 'üó∫Ô∏è Sugest√£o de Roteiro e Curiosidades',
        text: `
          <h4>Sugest√£o de Roteiro de Visita</h4>
          <p>Para aproveitar ao m√°ximo sua visita, sugerimos o seguinte roteiro. Clique no t√≠tulo de cada passo para ouvir a narra√ß√£o:</p>
          <div id="roteiro-text-content">
            <ol>
              <li><strong class="speakable-trigger" onclick="triggerSpeakStep(this)">Chegada e Contempla√ß√£o da Fachada:</strong> Reserve alguns minutos para admirar a arquitetura externa do Palacete. Observe os detalhes ornamentais, as sacadas e a impon√™ncia da constru√ß√£o.</li>
              <li><strong class="speakable-trigger" onclick="triggerSpeakStep(this)">Explorar o √Åtrio e √Åreas Comuns:</strong> Ao entrar, aprecie os espa√ßos internos que foram restaurados, como o √°trio principal e corredores, que podem conter elementos hist√≥ricos ou art√≠sticos.</li>
              <li><strong class="speakable-trigger" onclick="triggerSpeakStep(this)">Visitar Exposi√ß√µes (se houver):</strong> Verifique se h√° alguma exposi√ß√£o tempor√°ria ou a mostra permanente sobre a hist√≥ria do local.</li>
              <li><strong class="speakable-trigger" onclick="triggerSpeakStep(this)">Experi√™ncia Gastron√¥mica:</strong> Escolha um dos restaurantes para uma refei√ß√£o ou um drink. Considere fazer uma reserva antecipada, dependendo do dia e hor√°rio.
                <ul>
                  <li>Drinks e Petiscos: PUB 1549 <a href="https://www.instagram.com/pub.1549/" target="_blank" class="instagram-link-roteiro">(Instagram)</a>.</li>
                  <li>Refei√ß√£o Sofisticada com Vista: PAL√Ä <a href="https://www.instagram.com/pala7rooftop/" target="_blank" class="instagram-link-roteiro">(Instagram)</a>.</li>
                  <li>Comida Caseira e Casual: CASAR√åA <a href="https://www.instagram.com/casaria.ssa/" target="_blank" class="instagram-link-roteiro">(Instagram)</a>.</li>
                  <li>Culin√°ria de Raiz Baiana: PRETA <a href="https://www.instagram.com/pretatirachapeu/" target="_blank" class="instagram-link-roteiro">(Instagram)</a>.</li>
                </ul>
              </li>
              <li><strong class="speakable-trigger" onclick="triggerSpeakStep(this)">Sal√£o Chile e Outros Espa√ßos:</strong> Informe-se sobre a possibilidade de visitar outros sal√µes ou espa√ßos not√°veis do Palacete, como o hist√≥rico Sal√£o Chile, que pode estar aberto √† visita√ß√£o ou ser vis√≠vel de alguma √°rea.</li>
              <li><strong class="speakable-trigger" onclick="triggerSpeakStep(this)">Caf√© ou Drink ao Entardecer:</strong> Alguns estabelecimentos podem oferecer op√ß√µes para um caf√© ou um drink, permitindo apreciar o ambiente e, possivelmente, a vista.</li>
              <li><strong class="speakable-trigger" onclick="triggerSpeakStep(this)">Verificar Eventos do Dia:</strong> Consulte se h√° algum evento cultural acontecendo durante sua visita.</li>
            </ol>
          </div>
          <p><strong>Dica:</strong> Combine sua visita ao Palacete com um passeio pelo Centro Hist√≥rico, visitando o Elevador Lacerda, Mercado Modelo e o Pelourinho.</p>

          <h4 class="speakable-trigger" onclick="speakText(this.innerText + ' O Palacete Tira-Chap√©u √© um verdadeiro √≠cone no cora√ß√£o de Salvador, Bahia, refletindo a rica hist√≥ria e cultura da cidade. Desde sua constru√ß√£o, no in√≠cio do s√©culo XX, o Palacete tem sido testemunha de muitos dos momentos mais importantes de Salvador.', this)">üîé Curiosidades e Detalhes Hist√≥rico-Arquitet√¥nicos</h4>
          <div class="curiosity-section">
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">O Palacete Tira-Chap√©u √© um verdadeiro √≠cone no cora√ß√£o de Salvador, Bahia,</strong> refletindo a rica hist√≥ria e cultura da cidade. Desde sua constru√ß√£o, no in√≠cio do s√©culo XX, o Palacete tem sido testemunha de muitos dos momentos mais importantes de Salvador.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">Projetado em 1914, pelo renomado arquiteto italiano Rossi Baptista,</strong> o edif√≠cio foi originalmente projetado para abrigar a Associa√ß√£o dos Empregados do Com√©rcio da Bahia. Com suas lojas, salas de escrit√≥rio, sal√£o nobre e biblioteca, o edif√≠cio rapidamente se tornou um ponto de refer√™ncia na cidade.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">Situado na hist√≥rica Rua Chile, o Palacete est√° no epicentro da evolu√ß√£o de Salvador,</strong> uma √°rea que remonta √† primeira capital do Brasil. E at√© hoje, o edif√≠cio se destaca n√£o apenas por sua hist√≥ria, mas tamb√©m por sua conex√£o profunda com a vida cultural e social da cidade.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">At√© hoje o Palacete n√£o s√≥ preserva a heran√ßa cultural da Bahia,</strong> mas tamb√©m a reinventa e a celebra, garantindo que a hist√≥ria e a cultura continuem a prosperar.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">O Palacete Tira-Chap√©u, projetado pelo renomado arquiteto Rossi Baptista, √© um exemplo impressionante da arquitetura ecl√©tica de Salvador.</strong> Conhecido por seu compromisso com a unidade e coes√£o em cada detalhe, Rossi garantiu que o edif√≠cio fosse uma verdadeira obra-prima em todos os aspectos.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">A integra√ß√£o harmoniosa dos elementos ornamentais,</strong> desde os forros de madeira e gesso com estuque at√© os pisos de ladrilho hidr√°ulico policrom√°tico, revela um cuidado minucioso e uma vis√£o art√≠stica consistente.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">Os pisos do Palacete, em madeira e ladrilho hidr√°ulico com mosaicos vibrantes,</strong> trazem um toque inovador da √©poca e s√£o um deleite visual.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">As pe√ßas hexagonais em verde, vermelho, amarelo e branco</strong> criam padr√µes florais que ecoam a eleg√¢ncia encontrada em outras obras de Rossi, como o Palacete das Artes.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">J√° os forros variam entre madeira e gesso,</strong> com detalhes decorativos que adicionam um charme especial, incluindo pinturas no Sal√£o Nobre que real√ßam ainda mais a grandiosidade do espa√ßo.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">Cada detalhe do Palacete Tira-Chap√©u √© um tributo √† habilidade e vis√£o de Rossi Baptista.</strong> A fachada principal, com seus adornos sofisticados e elementos decorativos, e o hall interno, com t√©cnicas variadas e pe√ßas integradas como vitrais e bala√∫stres de madeira, demonstram uma rica tape√ßaria de hist√≥ria e arte.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">Este edif√≠cio n√£o apenas preserva o legado arquitet√¥nico de Salvador,</strong> mas tamb√©m se destaca como um √≠cone da arquitetura ecl√©tica, oferecendo um vislumbre do esplendor do in√≠cio do s√©culo XX.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">Rossi n√£o tinha uma forma√ß√£o acad√™mica formal,</strong> era um autodidata e um vision√°rio que transformou a paisagem urbana de Salvador com seus palacetes residenciais e edif√≠cios comerciais.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">Sua capacidade de combinar elementos diversos e criar fachadas impressionantes</strong> fez dele um arquiteto distinto, cujos trabalhos refletem um profundo entendimento das necessidades e est√©ticas de sua √©poca.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">A sua habilidade em incorporar elementos ecl√©ticos e criar fachadas impressionantes</strong> fez dele o maior expoente da arquitetura italiana na Salvador da primeira metade do s√©culo 20.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">Seu trabalho n√£o se limitou apenas a constru√ß√µes residenciais;</strong> ele tamb√©m deixou sua marca em importantes edif√≠cios institucionais e culturais, como a Escola de Teatro da UFBA e a Igreja de S√£o Pedro da Piedade.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">A Rua do Chile √© um elo com a hist√≥ria do Brasil,</strong> constru√≠da em 1549 por Tom√© de Souza, a Rua Chile, foi a primeira rua do Brasil e o epicentro do com√©rcio e da vida urbana.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">O Palacete Tira-Chap√©u foi inaugurado como um tributo a rua,</strong> celebrando n√£o apenas a sua import√¢ncia hist√≥rica, mas tamb√©m o esp√≠rito de progresso e sofistica√ß√£o que ela representa.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">Sua transforma√ß√£o ao longo do tempo reflete a evolu√ß√£o da cidade e da na√ß√£o,</strong> desde os dias de Rua Direita at√© a homenagem ao Chile em 1902, que consagrou seu nome atual.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">Ao longo dos s√©culos, esta rua se transformou em um palco para eventos hist√≥ricos,</strong> mudan√ßas pol√≠ticas e prosperidade econ√¥mica, refletindo as diversas fases de crescimento e resili√™ncia do pa√≠s.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">No in√≠cio do s√©culo XX, a Rua Chile era o cora√ß√£o pulsante de Salvador,</strong> oferecendo uma combina√ß√£o vibrante de com√©rcio, cultura e entretenimento, e se destacando com seus luxuosos estabelecimentos, cinemas e teatros.</p>
            <p><strong class="speakable-trigger" onclick="triggerSpeakCuriosity(this)">Hoje, o Palacete Tira-Chap√©u continua a ser um s√≠mbolo dessa homenagem,</strong> oferecendo aos visitantes uma oportunidade √∫nica de vivenciar a grandiosidade da arquitetura e da cultura de Salvador. Ao explorar o palacete, voc√™ se conecta com o passado vibrante da Rua Chile, vivenciando a hist√≥ria que moldou a cidade e apreciando a beleza de um dos seus mais ic√¥nicos marcos hist√≥ricos.</p>
          </div>
        `
      }
    ];

    const modalsContainer = document.getElementById('modals');
    modalContent.forEach((m, i) => {
      const modalDiv = document.createElement('div');
      modalDiv.className = 'modal';
      modalDiv.id = `modal${i}`;
      modalDiv.innerHTML = `
        <div class="modal-content">
          <span class="close-btn" onclick="closeModal(${i})">&times;</span>
          <h3>${m.title}</h3>
          <div>${m.text}</div>
        </div>`;
      modalsContainer.appendChild(modalDiv);
    });

    function toggleDetails(index) {
      const details = document.getElementById(`rest${index}`);
      const button = details.previousElementSibling;
      if (details.style.display === 'block') {
        details.style.display = 'none';
        button.innerHTML = button.innerHTML.replace('‚ûñ', '‚ûï');
      } else {
        details.style.display = 'block';
        button.innerHTML = button.innerHTML.replace('‚ûï', '‚ûñ');
      }
    }

    function openModal(index) {
      document.getElementById(`modal${index}`).style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    function closeModal(index) {
      document.getElementById(`modal${index}`).style.display = 'none';
      document.body.style.overflow = 'auto';
      if (speechSynthesis.speaking) {
        speechSynthesis.cancel();
      }
      if (currentlySpeakingElement) {
        currentlySpeakingElement.classList.remove('speaking-active');
        currentlySpeakingElement = null;
      }
    }
    
    function triggerSpeakStep(clickedTitleElement) {
        const listItem = clickedTitleElement.closest('li');
        if (listItem) {
            const textToSpeak = listItem.innerText.replace(/\s+/g, ' ').trim();
            speakText(textToSpeak, clickedTitleElement);
        }
    }

    function triggerSpeakCuriosity(clickedTitleElement) {
        const paragraphItem = clickedTitleElement.closest('p');
        if (paragraphItem) {
            const textToSpeak = paragraphItem.innerText.replace(/\s+/g, ' ').trim();
            speakText(textToSpeak, clickedTitleElement); // Feedback no <strong>
        }
    }
    
    function speakText(textToSpeak, feedbackElement) {
        if (!('speechSynthesis' in window)) {
            alert('Desculpe, seu navegador n√£o suporta a narra√ß√£o de texto.');
            return;
        }

        if (speechSynthesis.speaking) {
            speechSynthesis.cancel(); 
            if (currentlySpeakingElement) {
                currentlySpeakingElement.classList.remove('speaking-active');
            }
            if (currentlySpeakingElement === feedbackElement) { 
                currentlySpeakingElement = null;
                return; 
            }
        }
        
        utterance = new SpeechSynthesisUtterance(textToSpeak);
        utterance.lang = 'pt-BR';
        const voices = speechSynthesis.getVoices();
        let ptBRVoice = voices.find(voice => voice.lang === 'pt-BR' && voice.name.includes('Brasil'));
        if (!ptBRVoice) { 
            ptBRVoice = voices.find(voice => voice.lang === 'pt-BR');
        }
        if (ptBRVoice) {
            utterance.voice = ptBRVoice;
        } else {
            console.warn("Voz em pt-BR n√£o encontrada, usando padr√£o do navegador.");
        }

        utterance.onstart = () => {
            if (currentlySpeakingElement) { 
                currentlySpeakingElement.classList.remove('speaking-active');
            }
            if (feedbackElement) {
                feedbackElement.classList.add('speaking-active');
            }
            currentlySpeakingElement = feedbackElement;
        };
        
        utterance.onend = () => {
            if(feedbackElement) { 
                 feedbackElement.classList.remove('speaking-active');
            }
            currentlySpeakingElement = null;
        };
        utterance.onerror = (event) => {
            console.error('Erro na narra√ß√£o:', event.error);
            if(feedbackElement) {
                feedbackElement.classList.remove('speaking-active');
            }
            currentlySpeakingElement = null;
        };
        
        speechSynthesis.speak(utterance);
    }

    if ('speechSynthesis' in window) {
        speechSynthesis.getVoices(); 
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = () => { 
              speechSynthesis.getVoices(); 
            };
        }
    }

    // Three.js background animation
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bgCanvas'), alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);

    const particlesGeometry = new THREE.BufferGeometry();
    const particlesCnt = 1500;
    const posArray = new Float32Array(particlesCnt * 3);
    for (let i = 0; i < particlesCnt * 3; i++) {
      posArray[i] = (Math.random() - 0.5) * 30;
    }
    particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));

    const particlesMaterial = new THREE.PointsMaterial({
      size: 0.07, color: 0x00695c, transparent: true, opacity: 0.7
    });
    const particleSystem = new THREE.Points(particlesGeometry, particlesMaterial);
    scene.add(particleSystem);
    camera.position.z = 15;

    const clock = new THREE.Clock();
    function animate() {
      const elapsedTime = clock.getElapsedTime();
      particleSystem.rotation.y = elapsedTime * 0.05;
      particleSystem.rotation.x = elapsedTime * 0.03;
      renderer.render(scene, camera);
      requestAnimationFrame(animate);
    }
    animate();

    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });

  </script>
</body>
</html>
